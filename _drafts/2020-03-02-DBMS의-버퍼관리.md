---
layout: post
title:  "DBMS의 알고리즘"
#date:   2020-03-02 22:24:22 +0900
categories: read
---

**reference**: [Article](http://www.datanet.co.kr/news/articleView.html?idxno=115592)


### Virtual Memory (가상 메모리)
> 프로세스에게 각자의 Virtual address(가상 주소)를 부여해 프로세스를 분할해 사용하는 부분만을 메모리에 올리고, 나머지는 디스크에 보관하는 기법이다. 
> 가상 주소는 메모리 맵 또는 페이지 테이블을 거쳐 실제 물리 메모리의 주소를 의미하게 되고, 만약 메모리 맵이 존재 하지 않는 다면 이는 메모리에 존재하지 않고 디스크에만 존재함을 의미한다.

## Demand paging (요구 페이징)
> 가상 메모리에서 필요한 페이지를 메모리에 올리는 방식. 
> 페이지가 필요해 질때 메모리에 올리는 기법으로, 만약 메모리에 페이지가 존재 하지 않을 경우 운영체제에 Page fault가 발생했다는 것을 알리고, 운영체제는 디스크에서 페이지를 찾아 메모리의 빈 공간에 올리고, 페이지를 업데이트 시킨 후 다시 프로세스를 진행한다. 
> 페이지 부재가 발생하는 동안 실행 중인 프로세스는 필요한 페이지가 메모리에 올라올 때까지 잠들게 된다.

> 디스크에서 메모리로 페이지를 불러오는 과정은 비용이 많이 든다. 따라서 잦은 페이지 부재는 전체 성능에 악영향을 끼치게 되므로, 페이지 부재의 발생 빈도를 낮추는 것이 페이지 성능의 주요 척도가 된다.

## DBMS의 Buffer manager 개념
> 새로운 페이지를 버퍼로 로딩하기 위해서 비어있는 대상 프레임을 확보해야 하는데 이를 희생자 프레임 선택이라 한다
> 대상 프레임에 있는 페이지가 Dirty상태라면 비우기 전에 변경된 내역을 저장해야 하고, Dirty 상태가 아니라면 프레임을 비워주기만 하면 된다. 이 동작을 관리하기 위해서 DBMS의 버퍼 매니저는 Dirty Bits를 유지 관리해야 한다.
> 버퍼 교체 알고리즘 중 LRU 알고리즘과 클락 알고리즘 두 가지를 주로 사용하며 발전해왔다.

## LRU 알고리즘
> 가장 오래전에 사용된 버퍼부터 찾아 교체하는 알고리즘
> 가장 최근을 가장 끝에 넣어 Queue로 오래전 사용된 버퍼부터 검색한다
> 대표적인 상용 DMBS는 오라클로, 최신 버전에서는 터치 카운트 알고리즘을 추가하는 등 개선 된 LRU 알고리즘을 사용한다

## 클락 버퍼 교체 알고리즘
> 버퍼 프레임을 시계 형태로 차례로 나열하고, 참조 횟수를 0부터 사용되면 횟수를 증가시켜 나가고, 시계 바늘을 차례로 이동 시키면서 0 횟수인 프레임을 찾는다. 0보다 큰 횟수는 -1을 연산함
